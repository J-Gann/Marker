(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{22:function(e,n,t){},23:function(e,n,t){},27:function(e,n,t){},28:function(e,n,t){},30:function(e,n,t){},32:function(e,n,t){},33:function(e,n,t){},34:function(e,n,t){},35:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);t(18);var r=t(1),i=t.n(r),c=t(8),a=t.n(c),s=(t(22),t(3)),u=(t(23),t(16)),o=t(6),d=(t(27),t(28),t(2)),l=function(e){var n=e.onNextImageIndex,t=e.imagesLength,i=Object(r.useState)(0),c=Object(s.a)(i,2),a=c[0],u=c[1],o=Object(r.useState)(!1),l=Object(s.a)(o,2),j=l[0],f=l[1],h=Object(r.useState)(!0),b=Object(s.a)(h,2),m=b[0],O=b[1];return Object(r.useEffect)((function(){var e=window.setInterval((function(){t&&(j&&t-1>a?u((function(e){return e+1})):t-1===a&&m&&u((function(){return 0})))}),50);return function(){return window.clearInterval(e)}})),Object(r.useEffect)((function(){return n(a)}),[a]),Object(d.jsxs)("div",{className:"canvas-control",children:[Object(d.jsxs)("div",{className:"current-image",children:["Current Image: ",Object(d.jsx)("b",{children:a})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:function(){f(!1),u((function(e){return 0!==e?e-1:e}))},children:"Previous"}),Object(d.jsx)("button",{onClick:function(){f(!1),u((function(e){return e!==t+1?e+1:e}))},children:"Next"}),Object(d.jsx)("button",{onClick:function(){return f(!0)},children:"Play"}),Object(d.jsx)("button",{onClick:function(){return f(!1)},children:"Pause"}),Object(d.jsx)("button",{onClick:function(){return O((function(e){return!e}))},children:"Toggle Repeat"})]})]})},j=function(e){var n,t,i,c,a,u=e.images,j=e.markers,f=e.setMarker,h=Object(r.useState)({width:0,height:0}),b=Object(s.a)(h,2),m=b[0],O=b[1],x=Object(r.useRef)(null),g=Object(r.useState)(0),v=Object(s.a)(g,2),p=v[0],k=v[1],w=u[p];if(w){var N=m.width/w.width,y=m.height/w.height;n=N<y?N:y,t=w.width*n,i=(m.width-t)/2,a=w.height*n,c=(m.height-a)/2}Object(r.useEffect)((function(){var e=x.current,n=e.clientWidth,t=e.clientHeight;O({width:n,height:t});var r=function(){var e=x.current,n=e.clientWidth,t=e.clientHeight;O({width:n,height:t})};return window.addEventListener("resize",r),function(){return window.removeEventListener("resize",r)}}),[]);var I=function(e,t,r,a){if(u[e]){var s=u[e];if(j[s.name])return j[s.name].map((function(e){var u=e.id,l=e.x,j=e.y;return Object(d.jsx)(o.a,{x:l*n+i,y:j*n+c,radius:t*n,fill:r,draggable:a,onDragEnd:function(e){return f(s.name,u,e.target.x()/n-i,e.target.y()/n-c)}})}))}};return Object(d.jsxs)("div",{className:"canvas",children:[Object(d.jsx)("div",{ref:x,className:"canvas-container",children:Object(d.jsx)(o.e,{className:"canvas",width:m.width,height:m.height,children:Object(d.jsxs)(o.c,{children:[function(e){if(u[e]){var n=u[e];return Object(d.jsx)(o.b,{x:0+i,y:0+c,width:t,height:a,image:n})}}(p),I(p,10,"red",!0),function(e,n,t,r){for(var i=[],c=e-n;c<e;c++)i.push(c);return i.map((function(e){return I(e,t,r)}))}(p,10,4,"green"),function(e,t,r){if(u[p]){var a=u[p],s=j[a.name];if(s)return Object.keys(s).map((function(a){if("id"!==a){for(var s=[],l=e-t;l<e;l++)if(u[l]){var f=u[l],h=j[f.name][a];s.push(h.x*n+i),s.push(h.y*n+c)}return console.log(s),Object(d.jsx)(o.d,{points:s,stroke:r,strokeWidth:4})}}))}}(p,10,"green"),function(e,n,t,r){for(var i=[],c=e+1;c<e+n+1;c++)i.push(c);return i.map((function(e){return I(e,t,r)}))}(p,10,4,"blue"),function(e,t,r){if(u[p]){var a=u[p],s=j[a.name];if(s)return Object.keys(s).map((function(a){if("id"!==a){for(var s=[],l=e+1;l<e+t+1;l++)if(u[l]){var f=u[l],h=j[f.name][a];s.push(h.x*n+i),s.push(h.y*n+c)}return console.log(s),Object(d.jsx)(o.d,{points:s,stroke:r,strokeWidth:4})}}))}}(p,10,"blue")]})})}),Object(d.jsx)("div",{children:Object(d.jsx)(l,{onNextImageIndex:function(e){return k(e)},imagesLength:u.length})})]})},f=(t(30),t(10)),h=t.n(f),b=t(15),m=(t(32),function(e){var n=e.handleNewImages,t=e.handleNewMarkers,r=e.markers,i=function(e){return new Promise((function(n,t){var r=new FileReader;r.onload=function(){n(r.result)},r.onerror=t,r.readAsDataURL(e)}))},c=function(e){return new Promise((function(n,t){var r=new FileReader;r.onload=function(){n(r.result)},r.onerror=t,r.readAsText(e)}))},a=function(){var e=Object(b.a)(h.a.mark((function e(t){var r,c,a,s,u,o,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],c=[],a=0;a<t.length;a++)r.push(i(t[a])),c.push(t[a].name);return e.next=5,Promise.all(r);case 5:for(s=e.sent,r=[],u=[],o=function(){var e=new Image;u.push(e),r.push(new Promise((function(n,t){e.onload=function(){return n()}}))),e.src=s[d]},d=0;d<s.length;d++)o();return e.next=12,Promise.all(r);case 12:u.forEach((function(e,n){u[n].name=c[n]})),u.sort(),n(u);case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),s=function(){var e=Object(b.a)(h.a.mark((function e(n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(n[0]);case 2:r=e.sent,t(JSON.parse(r));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Files"}),Object(d.jsxs)("div",{className:"load-files",children:[Object(d.jsx)("label",{children:"Load Images"}),Object(d.jsx)("input",{type:"file",multiple:!0,accept:"image/png, image/jpeg",onInput:function(e){return a(e.target.files)}}),Object(d.jsx)("label",{children:"Load Marker"}),Object(d.jsx)("input",{type:"file",accept:"json",onInput:function(e){return s(e.target.files)}}),Object(d.jsx)("button",{onClick:function(){return function(e,n){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),t.setAttribute("download",e),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}("markers.json",JSON.stringify(r))},children:"Download Markers as File"})]})]})}),O=(t(33),t(34),t(35),function(e){var n=e.marker,t=(e.image,Object.keys(n));return Object(d.jsx)("div",{className:"marker-entries",children:t.map((function(e,t){return Object(d.jsx)("p",{children:e.toString()+":"+n[e].toString()+" "})}))})}),x=function(e){var n=e.image,t=e.markers,i=e.index,c=Object(r.useState)(!1),a=Object(s.a)(c,2),u=a[0],o=a[1];return Object(d.jsxs)("div",{className:"file-entry",children:[Object(d.jsx)("p",{children:"["+i+"] IMG: "+n.name}),t[n.name]&&Object(d.jsx)("button",{onClick:function(){return o((function(e){return!e}))},children:u?"Hide Marker":"Show Marker"}),u&&t[n.name]&&t[n.name].map((function(e,n){return Object(d.jsx)(O,{marker:e},n)}))]})},g=function(e){var n=e.images,t=e.markers;return console.log(n),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h3",{children:"Images"}),Object(d.jsx)("div",{className:"display-files",children:n.map((function(e,n){return Object(d.jsx)(x,{index:n,image:e,markers:t},n)}))})]})},v=function(e){var n=e.handleNewImages,t=e.handleNewMarkers,r=e.images,i=e.markers;return Object(d.jsxs)("div",{className:"editor",children:[Object(d.jsx)("div",{className:"editor-load",children:Object(d.jsx)(m,{handleNewImages:n,handleNewMarkers:t,markers:i})}),Object(d.jsx)("div",{className:"editor-display",children:Object(d.jsx)(g,{images:r,markers:i})})]})};var p=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],i=n[1],c=Object(r.useState)({}),a=Object(s.a)(c,2),o=a[0],l=a[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{id:"app-navigation",children:Object(d.jsx)(u.a,{bg:"dark",variant:"dark",children:Object(d.jsx)(u.a.Brand,{children:"Marker Visualization"})})}),Object(d.jsxs)("div",{id:"app-container",children:[Object(d.jsx)(j,{images:t,markers:o,setMarker:function(e,n,t,r){o[e].forEach((function(e){e.id===n&&(e.x=t,e.y=r)}))}}),Object(d.jsx)(v,{handleNewImages:function(e){return i(e)},images:t,handleNewMarkers:function(e){return l(e)},markers:o})]})]})},k=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),r(e),i(e),c(e),a(e)}))};a.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(p,{})}),document.getElementById("root")),k()}},[[39,1,2]]]);
//# sourceMappingURL=main.68b08733.chunk.js.map