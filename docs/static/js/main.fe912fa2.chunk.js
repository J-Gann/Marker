(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],[,,,,,,,,,,,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},,function(e,n,t){},,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},,,,function(e,n,t){"use strict";t.r(n);t(10);var r=t(0),c=t.n(r),i=t(4),a=t.n(i),s=(t(15),t(2)),u=(t(16),t(9)),o=(t(17),t(18),t(1)),l=function(e){var n=e.onNextImageIndex,t=e.imagesLength,c=Object(r.useState)(0),i=Object(s.a)(c,2),a=i[0],u=i[1],l=Object(r.useState)(!1),j=Object(s.a)(l,2),d=j[0],h=j[1],f=Object(r.useState)(!0),b=Object(s.a)(f,2),m=b[0],O=b[1];return Object(r.useEffect)((function(){var e=window.setInterval((function(){t&&(d&&t-1>a?u((function(e){return e+1})):t-1===a&&m&&u((function(){return 0})))}),50);return function(){return window.clearInterval(e)}})),Object(r.useEffect)((function(){return n(a)}),[a]),Object(o.jsxs)("div",{className:"canvas-control",children:[Object(o.jsxs)("div",{className:"current-image",children:["Current Image: ",Object(o.jsx)("b",{children:a})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{onClick:function(){h(!1),u((function(e){return 0!==e?e-1:e}))},children:"Previous"}),Object(o.jsx)("button",{onClick:function(){h(!1),u((function(e){return e!==t?e+1:e}))},children:"Next"}),Object(o.jsx)("button",{onClick:function(){return h(!0)},children:"Play"}),Object(o.jsx)("button",{onClick:function(){return h(!1)},children:"Pause"}),Object(o.jsx)("button",{onClick:function(){return O((function(e){return!e}))},children:"Toggle Repeat"})]})]})},j=function(e){var n=e.images,t=e.markers,c=Object(r.useState)({width:0,height:0}),i=Object(s.a)(c,2),a=i[0],u=i[1],j=Object(r.useRef)(null),d=Object(r.useRef)(null),h=0;Object(r.useEffect)((function(){var e=j.current,n=e.clientWidth,t=e.clientHeight;u({width:n,height:t});var r=function(){var e=j.current,n=e.clientWidth,t=e.clientHeight;u({width:n,height:t})};return window.addEventListener("resize",r),function(){return window.removeEventListener("resize",r)}}),[]),Object(r.useEffect)((function(){var e,r=d.current.getContext("2d");return function c(){if(r.clearRect(0,0,a.width,a.height),n.length>0){var i=n[h],s=a.width/i.width,u=a.height/i.height,o=s<u?s:u,l=i.width*o,j=(a.width-l)/2,d=i.height*o,f=(a.height-d)/2;r.drawImage(i,0+j,0+f,l,d),t[i.name]&&t[i.name].forEach((function(e){var n=e.x,t=e.y;r.fillStyle="red",r.beginPath(),r.arc(n*o+j,t*o+f,6,0,2*Math.PI),r.fill()}))}e=window.requestAnimationFrame(c)}(),function(){window.cancelAnimationFrame(e)}}));return Object(o.jsxs)("div",{className:"canvas",children:[Object(o.jsx)("div",{ref:j,className:"canvas-container",children:Object(o.jsx)("canvas",{className:"canvas",ref:d,width:a.width,height:a.height})}),Object(o.jsx)("div",{className:"canvas-control",children:Object(o.jsx)(l,{onNextImageIndex:function(e){return h=e},imagesLength:n&&n.length})})]})},d=(t(20),t(5)),h=t.n(d),f=t(8),b=(t(22),function(e){var n=e.handleNewImages,t=e.handleNewMarkers,r=function(e){return new Promise((function(n,t){var r=new FileReader;r.onload=function(){n(r.result)},r.onerror=t,r.readAsDataURL(e)}))},c=function(e){return new Promise((function(n,t){var r=new FileReader;r.onload=function(){n(r.result)},r.onerror=t,r.readAsText(e)}))},i=function(){var e=Object(f.a)(h.a.mark((function e(t){var c,i,a,s,u,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=[],i=[],a=0;a<t.length;a++)c.push(r(t[a])),i.push(t[a].name);return e.next=5,Promise.all(c);case 5:for(s=e.sent,c=[],u=[],o=function(){var e=new Image;u.push(e),c.push(new Promise((function(n,t){e.onload=function(){return n()}}))),e.src=s[l]},l=0;l<s.length;l++)o();return e.next=12,Promise.all(c);case 12:u.forEach((function(e,n){u[n].name=i[n]})),u.sort(),n(u);case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),a=function(){var e=Object(f.a)(h.a.mark((function e(n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(n[0]);case 2:r=e.sent,t(JSON.parse(r));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:"Files"}),Object(o.jsxs)("div",{className:"load-files",children:[Object(o.jsx)("label",{children:"Load Images"}),Object(o.jsx)("input",{type:"file",multiple:!0,accept:"image/png, image/jpeg",onInput:function(e){return i(e.target.files)}}),Object(o.jsx)("label",{children:"Load Marker"}),Object(o.jsx)("input",{type:"file",accept:"json",onInput:function(e){return a(e.target.files)}})]})]})}),m=(t(23),t(24),t(25),function(e){var n=e.marker,t=(e.image,Object.keys(n));return Object(o.jsx)("div",{className:"marker-entries",children:t.map((function(e,t){return"id"===e?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("p",{children:[e,": "]}),Object(o.jsxs)("p",{children:[" ",n[e]," "]},t)]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("label",{children:e}),Object(o.jsx)("input",{type:"text",value:n[e]},t)]})}))})}),O=function(e){var n=e.image,t=e.markers,c=e.index,i=Object(r.useState)(!1),a=Object(s.a)(i,2),u=a[0],l=a[1];return Object(o.jsxs)("div",{className:"file-entry",children:[Object(o.jsx)("p",{children:"["+c+"] IMG: "+n.name}),t[n.name]&&Object(o.jsx)("button",{onClick:function(){return l((function(e){return!e}))},children:u?"Hide Marker":"Show Marker"}),u&&t[n.name]&&t[n.name].map((function(e,n){return Object(o.jsx)(m,{marker:e},n)}))]})},x=function(e){var n=e.images,t=e.markers;return console.log(n),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h3",{children:"Images"}),Object(o.jsx)("div",{className:"display-files",children:n.map((function(e,n){return Object(o.jsx)(O,{index:n,image:e,markers:t},n)}))})]})},g=function(e){var n=e.handleNewImages,t=e.handleNewMarkers,r=e.images,c=e.markers;return Object(o.jsxs)("div",{className:"editor",children:[Object(o.jsx)("div",{className:"editor-load",children:Object(o.jsx)(b,{handleNewImages:n,handleNewMarkers:t})}),Object(o.jsx)("div",{className:"editor-display",children:Object(o.jsx)(x,{images:r,markers:c})})]})};var v=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],i=Object(r.useState)({}),a=Object(s.a)(i,2),l=a[0],d=a[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{id:"app-navigation",children:Object(o.jsx)(u.a,{bg:"dark",variant:"dark",children:Object(o.jsx)(u.a.Brand,{children:"Marker Visualization"})})}),Object(o.jsxs)("div",{id:"app-container",children:[Object(o.jsx)(j,{images:t,markers:l}),Object(o.jsx)(g,{handleNewImages:function(e){return c(e)},images:t,handleNewMarkers:function(e){return d(e)},markers:l})]})]})},p=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,32)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,i=n.getLCP,a=n.getTTFB;t(e),r(e),c(e),i(e),a(e)}))};a.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(v,{})}),document.getElementById("root")),p()}],[[29,1,2]]]);
//# sourceMappingURL=main.fe912fa2.chunk.js.map